{% extends 'base.html.twig' %}

{% block title %}Hello RegistrationController!{% endblock %}

{% block body %}
    <style>
        .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
        .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
    </style>

    <div class="example-wrapper">
        <h1>{{ controller_name }}! âœ…</h1>
        <table border="1">
            <tr>
                <th>Utilisateur</th>
                <th>Email</th>
            </tr>
            {% for admin in allAdmin %}
                <tr>
                    <td>{{ admin.username }}</td>
                    <td>{{ admin.email }}</td>
                    <td><a href="{{ path('app_edit',{ 'id': admin.id }) }}"><button>Modifier</button></a></td>
                        {% if user.email != admin.email %}
                            <td><a href="{{ path('app_delete',{'id': admin.id }) }}"><button>Supprimer</button></a></td>
                        {% endif %}
                </tr>
            {% endfor %}
            <a href="{{ path('app_registration') }}"><button>Ajouter un utilisateur</button></a>
        </table>
        <br>
        <br>
        <table border="1">
            <tr>
                <th>Chemin du fichier</th>
                <th>Creation du fichier</th>
            </tr>
            {% for allpicture in picture %}
                <tr>
                    {##}
                    <td>{{ allpicture.getPath()}}</td>
                    <td>{{ allpicture.getCreateAt()|date("m/d/y",false)}}</td>
            {% endfor %}
        </table>
        <br>
        <br>
        <table border="1">
            <tr>
                <th>Nom de la category</th>
            </tr>
            {% for category in allCategory %}
                <tr>
                    <td>{{ category.name }}</td>
                    <td><a href="/category/edit/{{ category.id }}"><button>Modifier</button></a></td>
                    <td><a href="/category/delete/{{ category.id }}"><button>Supprimer</button></a></td>
                </tr>
            {% endfor %}
            <a href="/category/add"><button>Ajouter une categorie</button></a>
        </table>
        <br>
        <br>
        <table border="1">
            <tr>
                <td>Annonces</td>
            </tr>
            <tr>
                <th>Titre</th>
                <th>Contenue</th>
                <th>Auteur</th>
                <th>Email</th>
                <th>Categorie</th>
                <th>Prix</th>
                <th>Status</th>
                <th>Creer le</th>
                <th>Publie le</th>
            </tr>
            {% for allAdvertShow in allAdvert %}
                <tr>
                    <td>{{ allAdvertShow.title }}</td>
                    <td>{{ allAdvertShow.content }}</td>
                    <td>{{ allAdvertShow.author }}</td>
                    <td>{{ allAdvertShow.email }}</td>
                    <td>{{ allAdvertShow.getCategory().getName() }}</td>
                    <td>{{ allAdvertShow.price }}</td>
                    <td>{{ allAdvertShow.state }}</td>
                    <td>{{ allAdvertShow.createdAt|date("m/d/y",false)}}</td>
                    <td>{{ allAdvertShow.publishedAt|date("m/d/y",false)}}</td>

                    <td><a href="/admin/validation/publish/{{ allAdvertShow.id }}"><button>Publier</button></a></td>
                    <td><a href="/admin/validation/reject/{{ allAdvertShow.id }}"><button>Rejeter</button></a></td>
                </tr>
            {% endfor %}
        </table>

    </div>
{% endblock %}
